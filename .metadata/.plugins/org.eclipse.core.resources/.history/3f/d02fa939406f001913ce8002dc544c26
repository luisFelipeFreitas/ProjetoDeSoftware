import java.util.List;

import corejava.Console;
import excecao.PersonagemNaoEncontradaException;
import excecao.EquipamentoNaoEncontradoException;
import modelo.Equipamento;
import modelo.Personagem;
import servico.PersonagemAppService;
import servico.EquipamentoAppService;
import util.Util;

public class PrincipalEquipamento {
    public static void main(String[] args) {
	String nome;
	String tipo;
	String elemento;

	Equipamento umEquipamento;
	Personagem umaPersonagem;

	EquipamentoAppService equipamentoAppService = new EquipamentoAppService();
	PersonagemAppService personagemAppService = new PersonagemAppService();

	boolean continua = true;
	while (continua) {
	    System.out.println('\n' + "O que você deseja fazer?");
	    /* ==> */ System.out.println('\n' + "1. Cadastrar um equipamento de uma personagem");
	    /* ==> */ System.out.println("2. Remover um equipamento");
	    System.out.println("3. Recuperar um equipamento e todas as suas habilidades");
	    System.out.println("4. Recuperar todos os equipamentos e suas habilidades");
	    System.out.println("5. Sair");

	    int opcao = Console.readInt('\n' + "Digite um número entre 1 e 5:");

	    switch (opcao) {
	    case 1: {
		long idPersonagem = Console.readInt('\n' + "Informe o número do equipamento: ");

		try {
		    umaPersonagem = personagemAppService.recuperaUmaPersonagem(idPersonagem);
		} catch (PersonagemNaoEncontradaException e) {
		    System.out.println('\n' + e.getMessage());
		    break;
		}

		nome = Console.readLine('\n' + "Informe o nome do equipamento: ");
		tipo = Console.readLine("Informe o tipo de equipamento: ");
		elemento = Console.readLine("Informe o elemento do equipamento: ");

		umEquipamento = new Equipamento(nome, tipo,elemento ,umaPersonagem);

		try
		/* ==> */ {
		    equipamentoAppService.inclui(umEquipamento);

		    System.out.println('\n' + "Personagem adicionada com sucesso");
		} catch (PersonagemNaoEncontradaException e) {
		    System.out.println(e.getMessage());
		}

		break;
	    }

	    case 2: {
		int resposta = Console.readInt('\n' + "Digite o número do equipamento que você deseja remover: ");

		try {
		    umEquipamento = equipamentoAppService.recuperaUmEquipamento(resposta);
		} catch (PersonagemNaoEncontradaException e) {
		    System.out.println('\n' + e.getMessage());
		    break;
		}

		System.out.println('\n' + "Número = " + umaPersonagem.getId() + "    Sexo = " +umaPersonagem.getSexo()+"    classe="+ umaPersonagem.getClasse());

		String resp = Console.readLine('\n' + "Confirma a remoção da personagem? S/N");

		if (resp.equals("s")) {
		    try
		    /* ==> */ {
			personagemAppService.exclui(umaPersonagem.getId());
			System.out.println('\n' + "Personagem removida com sucesso!");
		    } catch (PersonagemNaoEncontradaException e) {
			System.out.println(e.getMessage());
		    }
		} else {
		    System.out.println('\n' + "Personagem não removida.");
		}

		break;
	    }

	    case 3: {
	    	try {
	    long resposta = Console.readInt('\n' + "Informe o número da Personagem: ");
		umaPersonagem = personagemAppService.recuperaUmaPersonagemEEquipamentos(resposta);
		
		} catch (PersonagemNaoEncontradaException e) {
		    System.out.println('\n' + e.getMessage());
		    break;
		}

	    System.out.println('\n' + "Número = " + umaPersonagem.getId() + "    Sexo = " +umaPersonagem.getSexo()+"    classe="+ umaPersonagem.getClasse());
	    	

		List<Equipamento> equipamentos = umaPersonagem.getEquipamentos();

		for (Equipamento equipamento : equipamentos) {
		    System.out.println('\n' + "      Equipamento número = " + equipamento.getId() 
		                            + "  nome = " + equipamento.getNome()
		                            + "  tipo  = " + equipamento.getTipo()
		    						+ "  elemento = " + equipamento.getElemento());
		}

		break;
	    }
	    
	    
	    case 4:{
	    	List<Personagem> personagems = personagemAppService.recuperaPersonagensEEquipamentos();

			if (personagems.size() != 0) {
			    System.out.println("");

			    for (Personagem personagem : personagems) {

			    	System.out.println('\n' + "Número = " + personagem.getId() + "    Sexo = " +personagem.getSexo()+"    classe="+ personagem.getClasse());

				List<Equipamento> equipamentos = personagem.getEquipamentos();

				for (Equipamento equipamento : equipamentos) {
				    System.out.println('\n' + "      Equipamento número = " + equipamento.getId() 
				                            + "  nome = " + equipamento.getNome()
				                            + "  tipo  = " + equipamento.getTipo()
				    						+ "  elemento = " + equipamento.getElemento());
				}
			    }
			} else {
			    System.out.println('\n' + "Não há Personagens cadastradas.");
			}

			break;
	    }

	    case 5: {
		continua = false;
		break;
	    }

	    default:
		System.out.println('\n' + "Opção inválida!");
	    }
	}
    }
}
